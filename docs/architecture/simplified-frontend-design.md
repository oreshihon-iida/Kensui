# Kensui アプリケーション 設計仕様書

## 1. アプリケーション概要
シンプルな懸垂記録アプリケーション

### 1.1 主な機能
- 懸垂回数の手動入力
- 日別合計回数の折れ線グラフ表示
- トレーニング履歴の記録

## 2. 技術スタック
- Flutter/Dart
- ローカルストレージ: SharedPreferences
- グラフ表示: fl_chart パッケージ（折れ線グラフ表示用）
- Material Design（UIコンポーネント）

## 3. データモデル

### 3.1 トレーニング記録とゴール設定
```dart
class TrainingRecord {
  DateTime timestamp;  // 登録年月日時分
  int repetitions;    // 回数
}

class DailyTotal {
  DateTime date;      // 日付（DD形式）
  int totalRepetitions;
  int dailyGoal;      // 一日の目標回数
}

class DailyGoal {
  int targetRepetitions;  // 一日の目標回数
  DateTime lastUpdated;   // 最終更新日時
  
  // 目標達成時に自動で次の目標を設定
  void updateGoal(int achievedTotal) {
    targetRepetitions = achievedTotal + 5;
    lastUpdated = DateTime.now();
  }
}
```

## 4. 画面設計

### 4.1 メイン画面
- 回数入力フィールド（数値入力）
- 保存ボタン
- 一日の目標回数設定
  - 目標回数入力フィールド
  - 現在の目標回数表示
- 日別合計回数の折れ線グラフ表示
  - X軸: 日付（DD形式）
  - Y軸: 合計回数
  - データ表示
    - 実績値の折れ線
    - 目標値の折れ線（目標達成により自動調整）
  - 表示期間選択
    - 直近1か月（デフォルト）
    - 直近3か月
    - 全期間

### 4.2 履歴画面
- トレーニング記録一覧
  - 登録年月日時分
  - 回数
- 各記録の編集・削除機能

## 5. データ永続化
- SharedPreferencesを使用したローカルストレージ
- JSONフォーマットでのデータ保存
- 日別集計データのキャッシュ

## 6. UI/UXガイドライン
- シンプルで直感的な数値入力
- グラフの視認性を重視したデザイン
  - 実績値と目標値の線を異なる色で表示
  - 目標達成時のビジュアルフィードバック
- 明確な日付表示
- エラー処理（無効な入力値の検証）

## 7. 目標設定ロジック
- 目標達成の判定
  - 一日の合計数が目標値に到達した時点で達成と判定
- 目標値の自動調整
  - 達成時の合計数 + 5回を翌日の目標値として設定
  - 目標達成時に即時更新

## 7. パフォーマンス最適化
- グラフデータの効率的な計算
- メモリ効率の良いデータ構造
- スムーズなアニメーション
